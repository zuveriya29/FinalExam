<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"></html>
<html>
<head>
    <title>Order Management</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h2 class="mb-4">Order Management</h2>
    <ul class="nav nav-tabs" id="orderTabs">
        <li class="nav-item"><a class="nav-link active" data-status="All" href="#">All Orders</a></li>
        <li class="nav-item"><a class="nav-link" data-status="Completed" href="#">Completed</a></li>
        <li class="nav-item"><a class="nav-link" data-status="Continuing" href="#">Continuing</a></li>
        <li class="nav-item"><a class="nav-link" data-status="Restitute" href="#">Restitute</a></li>
        <li class="nav-item"><a class="nav-link" data-status="Canceled" href="#">Canceled</a></li>
    </ul>

    <div class="mt-3">
        <input type="text" id="orderIdFilter" placeholder="Order ID">
        <input type="text" id="customerFilter" placeholder="Customer">
        <input type="text" id="itemFilter" placeholder="Order Item">
        <input type="date" id="dateFilter">
        <input type="number" id="priceFilter" placeholder="Price">
        <select id="statusFilter">
            <option value="">All</option>
            <option>Completed</option>
            <option>Continuing</option>
            <option>Restitute</option>
            <option>Canceled</option>
        </select>
        <button onclick="applyFilters()">Apply</button>
    </div>

    <table class="table table-bordered mt-3">
        <thead>
            <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Order Item</th>
                <th>Delivery Date</th>
                <th>Price</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody id="orderTable"> <tr th:each="order: ${orders}">
            <td th:text="${order.id}"></td>

</tr></tbody>
        
    </table>
</div>

<script>
     document.addEventListener("DOMContentLoaded", () => { loadOrders("All"); });

    document.querySelectorAll("#orderTabs .nav-link").forEach(tab => {
        tab.addEventListener("click", e => {
            e.preventDefault();
            document.querySelector("#orderTabs .active").classList.remove("active");
            tab.classList.add("active");
            loadOrders(tab.getAttribute("data-status"));
        });
    });

    function loadOrders(status) {
        let url = "http://localhost:8080/api/orders";
        if(status !== "All") url += "/status/" + status;
        fetch(url)
            .then(res => res.json())
            .then(data => {
                let table = document.getElementById("orderTable");
                table.innerHTML = data.map(order => `
                    <tr>
                        <td>${order.orderId}</td>
                        <td>${order.customer}</td>
                        <td>${order.orderItem}</td>
                        <td>${order.deliveryDate}</td>
                        <td>${order.deliveryPricing}</td>
                        <td>${order.status}</td>
                    </tr>`).join("");
            });
    }

    function applyFilters() {
        alert("Filter clicked! You can enhance this by calling backend with filter params.");
    }
</script>
</body>
</html>