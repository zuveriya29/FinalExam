
<!DOCTYPE html>
<html>
<head>
    <title>Order Management</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h2 class="mb-4">Order Management</h2>
    <ul class="nav nav-tabs" id="orderTabs">
        <li class="nav-item"><a class="nav-link active" data-status="All" href="#">All Orders</a></li>
        <li class="nav-item"><a class="nav-link" data-status="Completed" href="#">Completed</a></li>
        <li class="nav-item"><a class="nav-link" data-status="Continuing" href="#">Continuing</a></li>
        <li class="nav-item"><a class="nav-link" data-status="Restitute" href="#">Restitute</a></li>
        <li class="nav-item"><a class="nav-link" data-status="Canceled" href="#">Canceled</a></li>
    </ul>

    <div class="mt-3 row">
        <div class="col-md-3">
            <select id="statusFilter" class="form-select">
                <option value="">All Statuses</option>
                <option>Completed</option>
                <option>Continuing</option>
                <option>Restitute</option>
                <option>Canceled</option>
            </select>
        </div>
        <div class="col-md-6">
            <input type="text" id="orderIdFilter" class="form-control" placeholder="Search by Order ID">
        </div>
        <div class="col-md-3">
            <button class="btn btn-primary w-100" onclick="applyFilters()">Filter</button>
        </div>
    </div>

    <table class="table table-bordered mt-3">
        <thead>
            <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Order Item</th>
                <th>Delivery Date</th>
                <th>Price</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody id="orderTable"></tbody>
    </table>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => { loadOrders("All"); });

    document.querySelectorAll("#orderTabs .nav-link").forEach(tab => {
        tab.addEventListener("click", e => {
            e.preventDefault();
            document.querySelector("#orderTabs .active").classList.remove("active");
            tab.classList.add("active");
            loadOrders(tab.getAttribute("data-status"));
        });
    });

    function loadOrders(status) {
        let url = "http://localhost:8080/api/orders";
        if(status !== "All") url += "/status/" + status;
        fetch(url)
            .then(res => res.json())
            .then(data => {
                let table = document.getElementById("orderTable");
                table.innerHTML = data.map(order => `
                    <tr>
                        <td>${order.orderId}</td>
                        <td>${order.customer}</td>
                        <td>${order.orderItem}</td>
                        <td>${order.deliveryDate}</td>
                        <td>${order.deliveryPricing}</td>
                        <td>${order.status}</td>
                    </tr>`).join("");
            });
    }

    function applyFilters() {
        let status = document.getElementById("statusFilter").value;
        let orderId = document.getElementById("orderIdFilter").value.trim();
        let url = "http://localhost:8080/api/orders";
        if(status) url += "/status/" + status;

        fetch(url)
            .then(res => res.json())
            .then(data => {
                if(orderId) {
                    data = data.filter(order => order.orderId.includes(orderId));
                }
                let table = document.getElementById("orderTable");
                table.innerHTML = data.map(order => `
                    <tr>
                        <td>${order.orderId}</td>
                        <td>${order.customer}</td>
                        <td>${order.orderItem}</td>
                        <td>${order.deliveryDate}</td>
                        <td>${order.deliveryPricing}</td>
                        <td>${order.status}</td>
                    </tr>`).join("");
            });
    }
</script>
</body>
</html>